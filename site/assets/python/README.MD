# Home Assistant CSV to JSON Converter

–°–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ Home Assistant –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∏—Ö –≤ JSON-—Ñ–∞–π–ª—ã –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–ª–∏ –∞–Ω–∞–ª–∏–∑–∞.

## –û–ø–∏—Å–∞–Ω–∏–µ

–°–∫—Ä–∏–ø—Ç —á–∏—Ç–∞–µ—Ç CSV-—Ñ–∞–π–ª —Å –∏—Å—Ç–æ—Ä–∏–µ–π –¥–∞—Ç—á–∏–∫–æ–≤ –∏–∑ Home Assistant –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é —Å–µ–Ω—Å–æ—Ä–∞ (`entity_id`). –î–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω–∞–π–¥–µ–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–π JSON-—Ñ–∞–π–ª —Å –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏.

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö

| –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö | –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –≤ entity_id | –í—ã—Ö–æ–¥–Ω–æ–π —Ñ–∞–π–ª |
|------------|---------------------------|---------------|
| –£—Ä–æ–≤–µ–Ω—å –±–∞—Ç–∞—Ä–µ–∏ | `battery_level`, `battery` | `ha-battery.json` |
| –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ | `temperature`, `_temp` | `ha-temperature.json` |
| –¢–æ–∫ –∑–∞—Ä—è–¥–∞ | `current`, `charge_current` | `ha-charge.json` |
| –í–ª–∞–∂–Ω–æ—Å—Ç—å | `humidity`, `relative_humidity` | `ha-humidity.json` |

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.10+
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏: `csv`, `json`, `re`, `datetime`, `collections`

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –∏—Å—Ç–æ—Ä–∏—é –¥–∞—Ç—á–∏–∫–æ–≤ –∏–∑ Home Assistant –≤ CSV-—Ñ–∞–π–ª
2. –ü–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ —Ñ–∞–π–ª –≤ `history.csv` –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `CSV_FILE` –≤ —Å–∫—Ä–∏–ø—Ç–µ
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç:

```bash
python csv_to_json.py
```

## –§–æ—Ä–º–∞—Ç –≤—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞

CSV –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç—Ä–∏ –∫–æ–ª–æ–Ω–∫–∏:
```
entity_id,state,last_changed
sensor.meshtastic_gway_4019549149_device_battery_level,90,2025-11-17T05:00:00.000Z
sensor.meshtastic_gway_4019549149_power_ch3_current,-0.73,2025-11-17T01:00:00.000Z
sensor.meshtastic_gway_3536866900_environment_relative_humidity,33.96,2025-11-17T00:00:00.000Z
sensor.ausentemperatur_temperature,6.25,2025-11-17T13:00:00.000Z
```

## –§–æ—Ä–º–∞—Ç –≤—ã—Ö–æ–¥–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

–ö–∞–∂–¥—ã–π JSON-—Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç:
```json
{
  "min": 0,
  "max": 100,
  "points": [90.0, 85.5, 82.3, ...]
}
```

- `min` ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –º–∏–Ω—É—Å 10 (–¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤)
- `max` ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–ª—é—Å 10 (–¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤)
- `points` ‚Äî –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –º–∞—Å—Å–∏–≤ –∑–Ω–∞—á–µ–Ω–∏–π

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –û–±—Ä–∞–±–æ—Ç–∫–∞ —á–∏—Å–µ–ª
–°–∫—Ä–∏–ø—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —á–∏—Å–ª–∞ –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö:
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ float: `12.34`
- –ß–∏—Å–ª–∞ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —Ç–æ—á–∫–∞–º–∏-—Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è–º–∏: `12.299.999.949.722.200` ‚Üí `12.2999999497222`
- –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: `-0.73`

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤
–°–∫—Ä–∏–ø—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç `entity_id` –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ —Ç–∏–ø–∞–º. –ï—Å–ª–∏ –≤ –æ–¥–Ω–æ–º CSV –µ—Å—Ç—å —Ä–∞–∑–Ω—ã–µ –¥–∞—Ç—á–∏–∫–∏, —Å–æ–∑–¥–∞—é—Ç—Å—è –≤—Å–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ JSON-—Ñ–∞–π–ª—ã.

### –ü—Ä–æ–ø—É—Å–∫ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –°—Ç—Ä–æ–∫–∏ —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è
- –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ —Ç–∏–ø—ã –¥–∞—Ç—á–∏–∫–æ–≤ –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è

## –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
============================================================
–û–±—Ä–∞–±–æ—Ç–∫–∞ history.csv...
============================================================

‚úì –£—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö: 4

üìä batteryLevel
   –§–∞–π–ª: ha-battery.json
   –¢–æ—á–µ–∫: 1247
   –î–∏–∞–ø–∞–∑–æ–Ω: 75 ... 110
   –ü–µ—Ä–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: [90.0, 89.5, 88.2]

üìä temperature
   –§–∞–π–ª: ha-temperature.json
   –¢–æ—á–µ–∫: 2891
   –î–∏–∞–ø–∞–∑–æ–Ω: -5 ... 35
   –ü–µ—Ä–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: [6.25, 6.5, 7.1]

üìä chargeCurrent
   –§–∞–π–ª: ha-charge.json
   –¢–æ—á–µ–∫: 1532
   –î–∏–∞–ø–∞–∑–æ–Ω: -15 ... 25
   –ü–µ—Ä–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: [-0.73, -0.65, 0.0]

üìä humidity
   –§–∞–π–ª: ha-humidity.json
   –¢–æ—á–µ–∫: 2456
   –î–∏–∞–ø–∞–∑–æ–Ω: 25 ... 95
   –ü–µ—Ä–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: [33.96, 34.2, 35.1]

============================================================
```

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö

–ß—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –Ω–æ–≤—ã—Ö –¥–∞—Ç—á–∏–∫–æ–≤, –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Å–ª–æ–≤–∞—Ä—å `DATA_PATTERNS`:

```python
DATA_PATTERNS = {
    "newType": {
        "keywords": ["keyword1", "keyword2"],
        "file": "ha-newtype.json"
    }
}
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

–°–≤–æ–±–æ–¥–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

## –ê–≤—Ç–æ—Ä

–°–æ–∑–¥–∞–Ω–æ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Home Assistant
